<template>
    <div class="page">
        <div class="navbar">
            <div class="navbar-inner sliding">
                <div class="left">
                    <a href="#" class="link back">
                        <i class="icon icon-back"></i>
                        <span class="ios-only">Back</span>
                    </a>
                </div>
                <div class="title">Virtual List without UL/LI</div>
                <!--<div class="subnavbar">-->
                    <!--<form data-search-container=".virtual-list" data-search-item="li" data-search-in=".item-title" class="searchbar searchbar-init">-->
                        <!--<div class="searchbar-inner">-->
                            <!--<div class="searchbar-input-wrap">-->
                                <!--<input type="search" placeholder="Search"/>-->
                                <!--<i class="searchbar-icon"></i>-->
                                <!--<span class="input-clear-button"></span>-->
                            <!--</div>-->
                            <!--<span class="searchbar-disable-button">Cancel</span>-->
                        <!--</div>-->
                    <!--</form>-->
                <!--</div>-->
            </div>
        </div>
        <!--<div class="searchbar-backdrop"></div>-->
        <div class="page-content">
            <!--<div class="list simple-list searchbar-not-found">-->
                <!--<ul>-->
                    <!--<li>Nothing found</li>-->
                <!--</ul>-->
            <!--</div>-->
            <div class="list virtual-list media-list"></div>
        </div>
    </div>
</template>
<script>
    return {
        data: function() {
            return {
                items: null,
                hotels: null
            };
        },
        on: {
            pageBeforeIn: function(e, page) {                                                               console.log('pageBeforeIn', page);

            },
            pageAfterIn: function(e, page) {
                var self = this;
                var items = [];
                for (var i = 1; i <= 10000; i++){ items.push({ title: 'Item '+i, subtitle: 'Subtitle '+i }); }
//                var items = [];
//                var hotels = app.data.hotels.hotels;
//                for (var i = 0; i <= 50; i++) {//console.log(hotels[i].name);
//                    items.push({
//                        id: app.data.hotels.hotels[i].id,
//                        name: app.data.hotels.hotels[i].name,
//                        star: app.data.hotels.hotels[i].star,
//                        image: app.data.hotels.hotels[i].images[0].url,
//                        propertyTypesname: app.data.hotels.hotels[i].propertyTypes.name,
//                        reviewsAllscore: app.data.hotels.hotels[i].reviews_all_score,
//                        reviewsAllname: app.data.hotels.hotels[i].reviews_all_name,
//                        reviewsAllcount: app.data.hotels.hotels[i].reviews_all_count,
//                        distanceToCitycentre: app.data.hotels.hotels[i].distance_to_city_centre,
//                    });
//                }
//                app.data.items = items;
//                console.log(app.data.items);

                self.virtualList = app7.virtualList.create({
                    // List Element
                    el: self.$el.find('.virtual-list'),
                    createUl: false,
                    cache: true,
                    // Pass array with items
                    items: items,//items: app.data.items,
                    // Custom search function for searchbar
                    searchAll: function (query, items) {
                        var found = [];
//                        for (var i = 0; i < items.length; i++) {
//                            if (items[i].name.toLowerCase().indexOf(query.toLowerCase()) >= 0 || query.trim() === '') found.push(i);
//                        }
                        return found; //return array with mathced indexes
                    },
                    // List item Template7 template
                    itemTemplate:
                    '<div>'+
//                    '<div ref-hotel="{{../id}}" class="hotel-card lazy demo-lazy three-images" data-background="{{image}}" style="background:#000;background-size: cover; height: 240px;margin-left:5px;margin-right:5px;margin-top:8px;margin-bottom:8px;border-radius: 5px;">{{name}} / {{star}}</div>'+
                    '<div style="height: 24px;">{{title}} {{subtitle}}</div>'+
                    '</div>',
                    // Item height
                    height: 24
                });
            },

            pageBeforeRemove: function() {
                var self = this;
                self.virtualList.destroy();
            },
            pageInit: function() {
                var self = this;
//                $(document).on("click", ".hotel-card", function(e) {
//                    var _ref_hotel = $(this).attr('ref-hotel');
//                    app.views.main.router.navigate("/hotel-details/" + _ref_hotel + "/", {
//                        reloadCurrent: false,
//                        pushState: false,
//                        context: {}
//                    });
//                });

            }
        }
    }
</script>
